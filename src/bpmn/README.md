## Пример использования возможностей плагина описания бизнес-процессов в BPMN нотации с использованием bpmnjs.

### Цели примера
- Создание модели бизнес-процессов в нотации BPMN (https://dochub.info/entities/docs/blank?dh-doc-id=dochub.bpmn);
- Автоматизированная обработка файлов XML, содержащих описание бизнес-процессов с целью:
  - Формирования реестра бизнес-процессов;
  - Формирования реестра функциональных дорожек и объектов бизнес-процессов;
  - Контроля замкнутости бизнес-процессов с детализацией до объектов бизнес-процессов; 
- Использование множественных зависимостей источников данных (datasets) (https://dochub.info/entities/docs/blank?dh-doc-id=dochub.datasets).
- Использование механизма функций (functions) (https://dochub.info/entities/docs/blank?dh-doc-id=dochub.functions).
 
### Чего нет в примере
- Архитектурных валидаторов (validators) (https://dochub.info/entities/docs/blank?dh-doc-id=dochub.rules.validators), но реализован специализированный отчет для проверки замкнутости;
- Специализированных сущностей (entities) (https://dochub.info/entities/docs/blank?dh-doc-id=dochub.flex_metamodel.entities), расширяющих стандартную метамодель, например, "Функциональныве дорожки" и "Объекты данных" бизнес-процессов.

### Файловая структура примера

```
|- examples                              - Каталог с файлами бизнес-процессов
|  |- test10_1.xml                       - Описание бизнес-процесса 10.1
|  |- test10_2.xml                       - Описание бизнес-процесса 10.2
|  |- test10_3.xml                       - Описание бизнес-процесса 10.3
|- templates                             - Шаблоны контекстов
|  |- bpmn.md                            - Описание отчета "20. Контроль заполнения бизнес-процессов"
|  |- business_processes_card.md         - Расширенная карточка бизнес-процесса со схемой, входящими и исхоящими процессами
|- business_processes.yaml               - Расширение атрибутного состава бизнес-процесса, чтобы была возможность использовать дополнительные свойства, которых нет в XML файлах
|- business_processes_extended_card.yaml - Расширенная карточка бизнес-процесса, созданная через entities
|- datasets.yaml                         - Используемые наборы данных
|- docs.yaml                             - Используемые документы
|- functions.yam                         - Используемые документы
|- README.md                             - Описание репозитория
```
### Особенности реализации в текущей версии плагина
- В качестве уникального идентификатора используется текстовое представление бизнес-процессов, функциональных дорожек и объектов бизнес-процессов, т.к. файлы с описанием бизнес-процессов между собой никак не связаны, соответственно отсутствует  возможность использовать идентификаторы, генерируемые плагином (они гарантировано уникальные только в пределах одного файла);
- Описание бизнес-процессов из XML файла напрямую не подключается к озеру данных, а  предварительно преобразуется в источник данных (dataset) единого вида, используя универсальный подход (см. `datasets.yaml`):
  - `business_processes.dataset.bp_10_1`
  - `business_processes.dataset.bp_10_2`
  - `business_processes.dataset.bp_10_3`  
- Источники данных (dataset) каждого бизнес-процесса объединяются в единый источник данных `business_processes.dataset.main_dataset` через механизм множественных зависимостей (https://dochub.info/entities/docs/blank?dh-doc-id=dochub.datasets) и уже он используется во всех «запросах», в том числе подключатеся к озеру данных;
- Для просмотра карточки бизнес-процесса создана отдельная сущность (entities);
- Во всех отчетах реализованы гиперссылки на расширенную карточку бизнес-процесса.

### Примеры

#### Реестр бизнес-процессов

![business_processes_extended_card.png](images%2Fbusiness_processes_extended_card.png)

#### Расширенная карчтока бизнес-процесса с возможностью редактирования

![business_processes_extended_card.png](images%2Fbusiness_processes_extended_card.png)

#### Реестр объектов бизнес-процессов

![business_processes_objects.png](images%2Fbusiness_processes_objects.png)

#### Отчет по ошибкам замкнуточти бизнес-процессов

![business_processes_errors.png](images%2Fbusiness_processes_errors.png)

Описание ошибок "Замкнутость бизнес-процессов"

| № строки | Ошибка                                                                                                                                                                           | Способ устранения                                                                                                 |
|----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|
| 1        | В бизнес-процессе "УД.10.2" указан входящий бизнес-процесс "УД.10.два", который не определен                                                                                     | Добавить новый бизнес-процесс, в котором указать связь с 10.2                                                     |
| 2        | В бизнес-процессе "УД.10.1" указан исходящий бизнес-процесс "УД.10.2" с объектом "Рамочный договор депозита в статусе «Утвержден»", НО, в "УД.10.2" нет соответствующего входа   | В бизнес-процесс "УД.10.2" добавить вход "УД.10.1" с объектом "Рамочный договор депозита в статусе «Утвержден»"   |   

Описание ошибок "Входящие или исходящие процессы без объектов или связей с шагами основного процесса"

| № строки | Ошибка                                                                                                    | Способ устранения                                                                  |
|----------|-----------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------|
| 1        | В бизнес-процессе "УД.10.3" есть входящий бизнес-процесс "БП без объектов" без указания объекта           | Добавить объект входящего бизнес-процесса по аналогии с "УД.10.1"                  |
| 2        | В бизнес-процессе "УД.10.3" есть входящий бизнес-процесс "БП без связей" без указания связи (зашисший)    | Добавить объект входящего бизнес-процесса и указать шаг процесса, с которым связан |

## Авторские права
- Автор примера: https://t.me/SultanovStanislav
